# Covid Twitter Dataset Analysis

In this project, I created several graphical representations showing the usage of various hashtags related to the coronavirus for the year 2020 using the mapreduce method in python.
To complete this project, I scanned all geotagged tweets sent in 2020 to monitor for the spread of the coronavirus on social media.

Some of the skills I practiced for this project were being able to:

1. work with large scale datasets
1. work with multilingual text
1. use the MapReduce divide-and-conquer paradigm to create parallel code

## Background

**About the Data:**

Approximately 500 million tweets are sent everyday.
Of those tweets, about 2% are *geotagged*.
That is, the user's device includes location information about where the tweets were sent from.
In total, there are about 1.1 billion tweets in this dataset.


I followed the [MapReduce](https://en.wikipedia.org/wiki/MapReduce) procedure to analyze these tweets.
MapReduce is a famous procedure for large scale parallel processing that is widely used in industry.
It is a 3 step procedure summarized in the following image:

<img src=mapreduce.png width=100% />


## Map

The `map.py` file processes a zip file for tweets on a single day and records the usage of the hashtags by language and country. Running the command,


```
$ ./src/map.py --input_path=/data/Twitter\ dataset/geoTwitter20-01-01.zip
```

generates a folder called `outputs` with a `geoTwitter20-01-01.zip.lang` and `geoTwitter20-01-01.zip.country` file containing JSON formatted information summarizing the tweets from 01 Jan 2020.

The `run_maps.sh` file loops over each file in the dataset and runs the `map.py` command on it. For example,

```
$ nohup sh run_maps.sh &
```

will run `maps.py` for all the zip files of each day in 2020 in parallel, significantly reducing processing time.

## Reduce

The `reduce.py` file combines the outputs generated by the `map.py` file. For example, the command,

```
$ ./src/reduce.py --input_paths outputs/geoTwitter20-*.lang --output_path=reduced.lang
```

generates a file called `reduced.lang` which contains all the data on hashtag usage by language throughout 2020. Additionally, the command,


```
$ ./src/reduce.py --input_paths outputs/geoTwitter20-*.country --output_path=reduced.country
```
generates a file called `reduced.country` that contains data on hashtag usage by country across 2020.

## Visualize

With `visualize.py`, a bar graph is generated to represent the top 10 languages/countries that used a specified hashtag. For instance, executing the command,

```
./src/visualize.py --input_path=reduced.lang --key='#coronavirus'
```
generates a png file of a bar graph indicating the usage of the `#coronavirus` hashtag by the top 10 languages.

### Internationalization

Internationalization (i18n) in computer science is essential as it caters to different cultures and languages worldwide. Despite its importance, internationalization is often overlooked in the development of computer software. This omission can provide inaccurate results while processing data that involves people from diverse cultures and regions. In the field of health information, internationalization is particularly crucial because it involves people from different geographic locations.

Unfortunately, the matplotlib module I used for my graphs does not render CJK characters by default.
I decided to find a solution for this issue to ensure i18n accessibility.
My code will download a font that uses a [FOSS license](https://github.com/openmaptiles/fonts/blob/master/noto-sans/LICENSE) and apply it so the characters are rendered properly.

## Results

Below are the results of my analysis and the command used to generate the results.

```
$ ./src/visualize.py --input_path=reduced.lang --key='#코로나바이러스'
```

<img src=reduced.lang_코로나바이러스_86082.png width=100% />


```
$ ./src/visualize.py --input_path=reduced.lang --key='#coronavirus'
```
<img src=reduced.lang_coronavirus_86405.png width=100% />

```
$ ./src/visualize.py --input_path=reduced.country --key='#코로나바이러스'
```
<img src=reduced.country_코로나바이러스_86455.png width=100% />

```
$ ./src/visualize.py --input_path=reduced.country --key='#coronavirus'
```
<img src=reduced.country_coronavirus_86500.png width=100% />


```
$ ./src/alternative_reduce.py --input_paths outputs/geoTwitter*.lang --keys '#doctor' '#nurse'
```
<img src=plot_83470.png width=100% />


```
$ ./src/alternative_reduce.py --input_paths outputs/geoTwitter*.lang --keys '#coronavirus' '#corona' '#covid19'
```
<img src=plot_83936.png width=100% />

